<!DOCTYPE html> 
<html lang="en"> 
<head> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1" /> 
  <title>Dnevend's Blog</title>

<link rel="stylesheet" href="/css/site.css">
<link rel="stylesheet" href="/css/markdown.css">
<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Roboto&display=fallback" rel="stylesheet">
<link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">

</head> 
<body> 
  <header>
    <a href="/" class="link--home">Dnevend</a>
    <!-- <a href="/Blogs" class="link--blogs">Blogs</a> -->
    <a href="/About" class="link--about">About</a>
  </header>
  <main> 
    <div class="main-content">
      
<article>
  <h1>使用Eleventy在GithubPages上部署博客站点</h1>
  <time datetime="2022-05-15T00:00:00.000Z">May 15, 2022</time>
  <!-- Excerpt Start -->
<p>无需服务器、数据库、域名，使用静态站点生成工具，折腾个人博客。
<img src="/imgs/11ty.jfif" alt="alt 11ty"></p>
<!-- Excerpt End -->
<hr>
<h3>什么是静态网站和静态网站生成器</h3>
<ul>
<li>
<p>静态网站：
静态网页由 HTML，CSS 和可选的 Javascript 组成。该页面不必由服务器端编程语言按需生成。</p>
</li>
<li>
<p>静态网站生成器：
静态 Web 页面生成器在本地计算机或云中生成完整的静态 Web 页面。然后，这些可以存储在服务器或内容分发网络（CDN）中。
与内容管理系统类似，生成器提供了使用布局模板，分离内容和页面框架，在某些情况下甚至可以从外部 CMS 中提取内容。</p>
</li>
<li>
<p>本站点使用了<a href="https://www.11ty.dev/" target="_blank" rel="noopener">Eleventy</a>，常见的静态站点生成工具还有<a href="https://gohugo.io/">Hugo</a>、<a href="https://hexo.io/">Hexo</a>、<a href="https://nextjs.org/">Next.js</a>及 Github 官方默认的<a href="https://www.jekyll.com/">Jekyll</a>等等</p>
</li>
</ul>
<h3>静态生成博客站点的优势</h3>
<ul>
<li>当部署在 GithubPages 上，可直接通过域名[name].github.io 访问，节省域名费用成本</li>
<li>无需服务器和数据库，确保了站点的安全性</li>
<li>可以使用多种 HTML、MarkDown 等模板语言</li>
<li>文档可以通过 Git 进行版本管理</li>
<li>站点迁移方便</li>
</ul>
<h3>项目初始化</h3>
<ul>
<li>你可以通过参考 <a href="https://keepinguptodate.com/pages/2019/06/creating-blog-with-eleventy/" target="_blank" rel="noopener">这篇文章</a> 来完成站点的初始工作.</li>
</ul>
<h3>部署流程</h3>
<ul>
<li>你可以通过参考 <a href="https://quinndombrowski.com/blog/2022/05/07/hosting-eleventy-on-github-pages/" target="_blank" rel="noopener">这篇文章</a> 来完成将Eleventy项目托管发布在GithubPages上的工作.</li>
</ul>
<blockquote>
<p><a href="https://docs.github.com/cn/pages" target="_blank" rel="noopener"><strong>Github中的配置</strong></a></p>
<ul>
<li>创建公开的代码仓库命名为[name].github.io</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>创建gh-pages分支</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>进入仓库设置页的Actions/General选项页中，选择Action permissions选项的<i>Allow all actions and reusable workflows</i>，以及Workflow permissions选项的Read and write permissions，以使你的Workflows能正常的写入站点文件</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>进入仓库设置页的Pages选项页，在Source下拉菜单中选择刚刚创建的gh-pages分支,通过[name].github.io访问时，将默认读取此分支下的静态文件</li>
</ul>
</blockquote>
<blockquote>
<p><strong>Eleventy中配置</strong></p>
<ul>
<li>.nojekyll文件：在项目根目录中创建一个名为 <i>.nojekyll</i> 的空文件，此文件将阻止Github尝试将你的站点构建为jekyll站点.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>.github目录：在项目根目录中创建一个名为 <i>.github</i> 的目录，并在此目录中创建名为 <i>workflows</i> 的目录.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>build.yml文件：在上述步骤创建的workflows目录中创建名为 <i>build.yml</i> 文件，这个文件将会在你提交Git操作的时候触发工作流程，以在你每次更新内容的时候重新生成站点并发布.</li>
</ul>
</blockquote>
<blockquote>
<p><strong>build.yml</strong></p>
</blockquote>
<pre class="language-shell-session" tabindex="0"><code class="language-shell-session"><span class="token output">name: Build Eleventy<br><br>on:<br>  push:<br>    branches:<br>      - main<br><br>jobs:<br>  build:<br>    runs-on: ubuntu-20.04<br><br>    strategy:<br>      matrix:<br>        node-version: [16.x]<br><br>    steps:<br>      - uses: actions/checkout@v2<br><br>      - name: Use Node.js $<br>        uses: actions/setup-node@v1<br>        with:<br>          node-version: $<br><br>      - name: Install dependencies &amp; build<br>        run: |<br>          if [ -e package-lock.json ]; then<br>          npm ci<br>          else<br>          npm i<br>          fi<br>          npm run build<br><br>      - name: Deploy<br>        uses: peaceiris/actions-gh-pages@v3<br>        with:<br>          publish_dir: ./_site<br>          github_token: $</code></pre>
<hr>
<h3>参考引用</h3>
<ul>
<li><a href="https://github.com/Dnevend/Dnevend.github.io">本项目开源地址</a></li>
<li><a href="https://docs.github.com/cn/pages">Github Pages</a></li>
<li><a href="https://www.11ty.dev/docs/tutorials/">Eleventy Documentation</a></li>
<li><a href="https://keepinguptodate.com/pages/2019/06/creating-blog-with-eleventy/">Creating A Blog With Eleventy</a></li>
<li><a href="https://quinndombrowski.com/blog/2022/05/07/hosting-eleventy-on-github-pages/">Hosting Eleventy on GitHub Pages</a></li>
</ul>


  <div class="share-box">
    <a href="https://twitter.com/share?text=使用Eleventy在GithubPages上部署博客站点&amp;url=https://dnevend.github.io/posts/2022/Deploy-Blog-in-GithubPages-with-Eleventy/"  target="_blank"><i>Share With Twitter</i></a>
  </div>
  
</article>
    </div>
  </main> 
  <footer>
  <a href="https://github.com/Dnevend" target="_blank" class="link-github">Github</a>
  <a href="https://twitter.com/Dnevend_09" target="_blank" class="link-twitter">Twitter</a>
  &copy; Dnevend
  <p>在战争中学习战争</p>
  </footer>
</body> 
</html>